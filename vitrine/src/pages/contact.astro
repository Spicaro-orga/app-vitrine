---
import { getLocale } from 'astro-i18n-aut'
import TitleWithUnderline from '../components/common/TitleWithUnderline.astro'
import { useTranslations } from '../i18n/translator'
import Layout from '../layouts/Layout.astro'
const locale = getLocale(Astro.url)

const { t } = useTranslations(locale)

// Define a type for the field
type FieldType = 'text' | 'email' | 'tel' | 'textarea'

interface Field {
  type: FieldType
  name: string
  label: string
  placeholder: string
  required?: boolean
}

const fields: Field[] = [
  {
    type: 'text',
    name: 'first-name',
    label: t('contact.form.firstname'),
    placeholder: t('contact.form.firstname'),
    required: true,
  },
  {
    type: 'text',
    name: 'last-name',
    label: t('contact.form.lastname'),
    placeholder: t('contact.form.lastname'),
    required: true,
  },
  {
    type: 'email',
    name: 'email',
    label: t('contact.form.email'),
    placeholder: t('contact.form.email'),
    required: true,
  },
  {
    type: 'tel',
    name: 'phone',
    label: t('contact.form.telephone'),
    placeholder: t('contact.form.telephone'),
  },
  {
    type: 'textarea',
    name: 'message',
    label: t('contact.form.message'),
    placeholder: t('contact.form.message'),
    required: true,
  },
]
---

<Layout title="Spicaro">
  <main class="container mx-auto px-4 py-4 sm:px-6 lg:px-8">
    <section class="flex flex-col items-center">
      <TitleWithUnderline
        title={t('contact.title')}
        variant="h1"
        size="md:text-6xl text-5xl"
        center={true}
        width="w-1/2"
        centerMobile={true}
      />
      <form>
        <div class="grid grid-cols-1 gap-6 md:grid-cols-2">
          {
            fields.map((field) => (
              <div
                class={`col-span-1 ${field.type === 'textarea' ? 'md:col-span-2' : ''}`}
              >
                {field.type === 'textarea' ? (
                  <textarea
                    id={field.name}
                    name={field.name}
                    rows="6"
                    placeholder={field.placeholder}
                    class="mt-1 block w-full resize-none rounded-md border border-gray-700 bg-transparent p-2 outline-none placeholder:text-gray-100 focus:border-white focus:ring-white"
                    required={field.required}
                  />
                ) : (
                  <input
                    type={field.type}
                    id={field.name}
                    name={field.name}
                    placeholder={field.placeholder}
                    class="mt-1 block w-full rounded-md border-b border-gray-700 bg-transparent p-2 outline-none placeholder:text-gray-100 focus:border-white focus:ring-white"
                    required={field.required}
                  />
                )}
              </div>
            ))
          }
        </div>
        <p class="mt-4 text-center text-xs text-gray-400 md:px-24">
          {t('contact.description')}
        </p>
        <p class="mt-2 text-center text-xs text-gray-400">
          {t('contact.note')}
        </p>
        <div class="mt-6 text-center">
          <button
            type="submit"
            class="mx-auto flex items-center gap-2 rounded-full border bg-transparent px-4 py-1"
          >
            {t('contact.form.submit')}
          </button>
        </div>
      </form>
    </section>
  </main>
</Layout>

<style>
  html,
  body {
    height: 100%;
    margin: 0;
  }

  body {
    background: url('/contact-page/contact_visuel.jpg') no-repeat center center
      fixed;
    background-size: cover;
  }
</style>
